(* 
bit.ly/下載_鱫鰰APFS助手 ¬ 
{"刪除APFS容器並將舊磁盤重新格式化為HFS", "從其APFS容器中刪除APFS卷", "開啟腳本"} 

GitHub.com/VirgoEros/APFShelper/blob/master/AppleScript 
*)
----------------------------∞ 鱫鰰APFS助手 ∞------------------------------ON. 
global APFS_Option, deleteContainer, deleteVolume, OpenScript, errmsg, errnbr
global deleteContainer, errmsg, errnbr
global deleteVolume, errmsg, errnbr
global OpenScript, OpenAppScript, TerminalNotifier, errmsg, errnbr

on run
	try
		tell application "Finder" to set {button returned:APFS_Option} to ¬
				display dialog ("請嚫鱫的沝女鰰選擇 鱫鰰APFS助手 選項唷💋") buttons ¬
					{"刪除APFS容器並將舊磁盤重新格式化為HFS", "從其APFS容器中刪除APFS卷", "開啟腳本"} with title ¬
					{"鱫鰰APFS助手"}
			if APFS_Option is "刪除APFS容器並將舊磁盤重新格式化為HFS" then run script deleteContainer
			if APFS_Option is "從其APFS容器中刪除APFS卷" then run script deleteVolume
			if APFS_Option is "開啟腳本" then run script OpenScript 
	on error errmsg number errnbr
		if errnbr = -128 then continue quit
		continue quit
	end try
end run
-------------------∞ 刪除APFS容器並將舊磁盤重新格式化為HFS ∞--------------------ON. 
script deleteContainer
	try
		tell application "Finder" to display dialog (" 
請嚫鱫的沝女鰰鰎魞欲變鯁之APFS的磁鰈號唷💋 
例: disk1s2 ")
		tell application "Terminal"
			if not (exists window 1) then reopen
			activate
			set size of window 1 to {550, 1200}
			(do script ("diskutil list ") in window 1)
			tell application "System Events" to key code 2 & 34 & 1 & 40 & 32 & 17 & 34 & 37 & 49 & 0 & 35 & 3 & 1 & 49 & 2 & 14 & 37 & 14 & 17 & 14 & 8 & 31 & 45 & 17 & 0 & 34 & 45 & 14 & 15 & 49 & 2 & 34 & 1 & 40
		end tell
		continue quit
	on error errmsg number errnbr
		if errnbr = -128 then continue quit
		continue quit
	end try
end script
--------------------------∞ 從其APFS容器中刪除APFS卷 ∞---------------------------ON. 
script deleteVolume
	try
		tell application "Finder" to display dialog (" 
請嚫鱫的沝女鰰鰎魞欲變鯁之APFS的磁鰈號唷💋 
例: disk1s2 ")
		tell application "Terminal"
			if not (exists window 1) then reopen
			activate
			set size of window 1 to {550, 1200}
			(do script ("diskutil list ") in window 1)
			tell application "System Events" to key code 2 & 34 & 1 & 40 & 32 & 17 & 34 & 37 & 49 & 0 & 35 & 3 & 1 & 49 & 2 & 14 & 37 & 14 & 17 & 14 & 9 & 31 & 37 & 32 & 46 & 14 & 49 & 2 & 34 & 1 & 40
		end tell
		continue quit
	on error errmsg number errnbr
		if errnbr = -128 then continue quit
		continue quit
	end try
end script
------------------------ 開啟腳本 ------------------------ON. 
script OpenScript
	try
		set OpenAppScript to POSIX path of (path to me as text) & ("Contents/Resources/Scripts/main.scpt")
		set OpenAppScript to quoted form of OpenAppScript
		do shell script ("open " & OpenAppScript)
		set TerminalNotifier to POSIX path of (path to me as text) & ("Contents/MacOS/terminal-notifier")
		set TerminalNotifier to quoted form of TerminalNotifier
		do shell script (TerminalNotifier & " -title 腳本已開啟鰳唷💋")
		continue quit
	on error errmsg number errnbr
		if errnbr = -128 then continue quit
		continue quit
	end try
end script
----------------------------∞ 鱫鰰APFS助手 ∞----------------------------END. 


-- 
