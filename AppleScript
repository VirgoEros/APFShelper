(* 
bit.ly/ä¸‹è¼‰_é±«é°°APFSåŠ©æ‰‹ Â¬ 
{"åˆªé™¤APFSå®¹å™¨ä¸¦å°‡èˆŠç£ç›¤é‡æ–°æ ¼å¼åŒ–ç‚ºHFS", "å¾å…¶APFSå®¹å™¨ä¸­åˆªé™¤APFSå·", "é–‹å•Ÿè…³æœ¬"} 
GitHub.com/VirgoEros/APFShelper/blob/master/AppleScript 
*)
----------------------------âˆ é±«é°°APFSåŠ©æ‰‹ âˆ------------------------------ON. 
global APFShelper, APFS_Option, deleteContainer, deleteVolume, OpenScript, errmsg, errnbr
global deleteContainer, DiskutilList, InputDiskNumber, TerminalNotifier, errmsg, errnbr
global deleteVolume, DiskutilList, InputDiskNumber, TerminalNotifier, errmsg, errnbr
global OpenScript, OpenAppScript, TerminalNotifier, errmsg, errnbr

on run
	try
		tell application "Finder" to set {button returned:APFS_Option} to Â¬
			display dialog ("è«‹åš«é±«çš„æ²å¥³é°°é¸æ“‡ é±«é°°APFSåŠ©æ‰‹ é¸é …å”·ğŸ’‹") buttons Â¬
				{"åˆªé™¤APFSå®¹å™¨ä¸¦å°‡èˆŠç£ç›¤é‡æ–°æ ¼å¼åŒ–ç‚ºHFS", "å¾å…¶APFSå®¹å™¨ä¸­åˆªé™¤APFSå·", "é–‹å•Ÿè…³æœ¬"} with title Â¬
				{"é±«é°°APFSåŠ©æ‰‹"}
		if APFS_Option is "åˆªé™¤APFSå®¹å™¨ä¸¦å°‡èˆŠç£ç›¤é‡æ–°æ ¼å¼åŒ–ç‚ºHFS" then run script deleteContainer
		if APFS_Option is "å¾å…¶APFSå®¹å™¨ä¸­åˆªé™¤APFSå·" then run script deleteVolume
		if APFS_Option is "é–‹å•Ÿè…³æœ¬" then run script OpenScript
	on error errmsg number errnbr
		if errnbr = -128 then continue quit
		continue quit
	end try
end run
-------------------âˆ åˆªé™¤APFSå®¹å™¨ä¸¦å°‡èˆŠç£ç›¤é‡æ–°æ ¼å¼åŒ–ç‚ºHFS âˆ--------------------ON. 
script deleteContainer
	try
		tell application "Finder"
			display dialog (" 
è«‹åš«é±«çš„æ²å¥³é°°è¨˜ä½æ¬²è®Šé¯ä¹‹APFSçš„ç£é°ˆè™Ÿå”·ğŸ’‹ 
ä¾‹: disk1s2 ")
			set DiskutilList to do shell script ("diskutil list ")
			display dialog DiskutilList
			set InputDiskNumber to display dialog "è«‹åš«é±«çš„æ²å¥³é°°é°é­æ¬²è®Šé¯ä¹‹APFSçš„ç£é°ˆè™Ÿå”·ğŸ’‹ " default answer "" buttons {"å—¯å“¼ã€‚ã€‚å¥½çš„å”·ğŸ’‹"} default button 1 with title Â¬
				{"é±«é°°YouTubeä¸‹è¼‰"}
			set InputDiskNumber to (text returned of result)
			if InputDiskNumber is "" then return continue quit
			do shell script ("diskutil apfs deletecontainer " & InputDiskNumber)
			do shell script ("open /Applications/Utilities/'Disk Utility.app'")
		end tell
		set TerminalNotifier to POSIX path of (path to me as text) Â¬
			& {"Contents/MacOS/terminal-notifier"}
		set TerminalNotifier to quoted form of TerminalNotifier
		(do shell script TerminalNotifier & " -title å·²é¯‡æˆäº†å”·ğŸ’‹")
		continue quit
	on error errmsg number errnbr
		if errnbr = -128 then continue quit
		continue quit
	end try
end script
--------------------------âˆ å¾å…¶APFSå®¹å™¨ä¸­åˆªé™¤APFSå· âˆ---------------------------ON. 
script deleteVolume
	try
		tell application "Finder"
			display dialog (" 
è«‹åš«é±«çš„æ²å¥³é°°è¨˜ä½æ¬²è®Šé¯ä¹‹APFSçš„ç£é°ˆè™Ÿå”·ğŸ’‹ 
ä¾‹: disk1s2 ")
			set DiskutilList to do shell script ("diskutil list ")
			display dialog DiskutilList
			set InputDiskNumber to display dialog "è«‹åš«é±«çš„æ²å¥³é°°é°é­æ¬²è®Šé¯ä¹‹APFSçš„ç£é°ˆè™Ÿå”·ğŸ’‹ " default answer "" buttons {"å—¯å“¼ã€‚ã€‚å¥½çš„å”·ğŸ’‹"} default button 1 with title Â¬
				{"é±«é°°YouTubeä¸‹è¼‰"}
			set InputDiskNumber to (text returned of result)
			if InputDiskNumber is "" then return continue quit
			do shell script ("diskutil apfs deleteVolume " & InputDiskNumber)
			do shell script ("open /Applications/Utilities/'Disk Utility.app'")
		end tell
		set TerminalNotifier to POSIX path of (path to me as text) Â¬
			& {"Contents/MacOS/terminal-notifier"}
		set TerminalNotifier to quoted form of TerminalNotifier
		(do shell script TerminalNotifier & " -title å·²é¯‡æˆäº†å”·ğŸ’‹")
		continue quit
	on error errmsg number errnbr
		if errnbr = -128 then continue quit
		continue quit
	end try
end script
------------------------ é–‹å•Ÿè…³æœ¬ ------------------------ON. 
script OpenScript
	try
		set OpenAppScript to POSIX path of (path to me as text) & ("Contents/Resources/Scripts/main.scpt")
		set OpenAppScript to quoted form of OpenAppScript
		do shell script ("open " & OpenAppScript)
		set TerminalNotifier to POSIX path of (path to me as text) & ("Contents/MacOS/terminal-notifier")
		set TerminalNotifier to quoted form of TerminalNotifier
		do shell script (TerminalNotifier & " -title è…³æœ¬å·²é–‹å•Ÿé°³å”·ğŸ’‹")
		continue quit
	on error errmsg number errnbr
		if errnbr = -128 then continue quit
		continue quit
	end try
end script
----------------------------âˆ é±«é°°APFSåŠ©æ‰‹ âˆ-----------------------------END. 


-- 
