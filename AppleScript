(* 
bit.ly/下載_鱫鰰APFS助手 ¬
 {"刪除APFS容器並將舊磁盤重新格式化為HFS", "從其APFS容器中刪除APFS卷"} 

GitHub.com/VirgoEros/APFShelper/blob/master/AppleScript 
*)
----------------------------∞ 鱫鰰APFS助手 ∞------------------------------ON. 
global Option, deleteContainer, deleteVolume, OpenScript, errmsg, errnbr
global deleteContainer, GetDiskNumber, DiskNumbering, TerminalNotifier, errmsg, errnbr
global deleteVolume, GetDiskNumber, DiskNumbering, TerminalNotifier, errmsg, errnbr
global OpenScript, OpenAppScript, TerminalNotifier, errmsg, errnbr

on run
	try
		tell application "Finder"
			set {button returned:Option} to ¬
				display dialog ("請嚫鱫的沝女鰰選擇 鱫鰰APFS助手 選項唷💋") buttons ¬
					{"刪除APFS容器並將舊磁盤重新格式化為HFS", "從其APFS容器中刪除APFS卷", "開啟腳本"} with title ¬
					{"鱫鰰APFS助手"}
			if Option is "刪除APFS容器並將舊磁盤重新格式化為HFS" then run script deleteContainer
			if Option is "從其APFS容器中刪除APFS卷" then run script deleteVolume
			if Option is "開啟腳本" then run script OpenScript
		end tell
	on error errmsg number errnbr
		if errnbr = -128 then continue quit
		continue quit
	end try
end run
-------------------∞ 刪除APFS容器並將舊磁盤重新格式化為HFS ∞--------------------ON. 
script deleteContainer
	try
		tell application "Finder"
			display dialog (" 
請嚫鱫的沝女鰰記住欲變鯁之APFS的磁鰈號唷💋 
例: disk1s2 ")
			set GetDiskNumber to do shell script ("diskutil apfs list ")
			display dialog GetDiskNumber
			set DiskNumbering to ¬
				display dialog {" 
請嚫鱫的鰛鰇鱮美鱺沝女鰰鰎魞欲刪除APFS的磁鰈編號唷💋"} default answer ("") buttons ¬
					{"嗯哼。。好的唷💋"} default button ("嗯哼。。好的唷💋")
			set DiskNumbering to {text returned of the result}
			if DiskNumbering is "" then return continue quit
			do shell script ("diskutil apfs deletecontainer " & DiskNumbering)
			set TerminalNotifier to POSIX path of (path to me as text) & ("Contents/MacOS/terminal-notifier")
			set TerminalNotifier to quoted form of TerminalNotifier
			do shell script (TerminalNotifier & " -title APFS已變鯁𩻟HFS磁鰈鰳唷💋")
		end tell
		continue quit
	on error errmsg number errnbr
		if errnbr = -128 then continue quit
		continue quit
	end try
end script
--------------------------∞ 從其APFS容器中刪除APFS卷 ∞---------------------------ON. 
script deleteVolume
	try
		tell application "Finder"
			display dialog (" 
請嚫鱫的沝女鰰記住欲變鯁之APFS的磁鰈號唷💋 
例: disk1s2 ")
			set GetDiskNumber to do shell script ("diskutil apfs list ")
			display dialog GetDiskNumber
			set DiskNumbering to ¬
				display dialog {" 
請嚫鱫的鰛鰇鱮美鱺沝女鰰鰎魞欲刪除APFS的磁鰈編號唷💋"} default answer ("") buttons ¬
					{"嗯哼。。好的唷💋"} default button ("嗯哼。。好的唷💋")
			set DiskNumbering to {text returned of the result}
			if DiskNumbering is "" then return continue quit
			do shell script ("diskutil apfs deleteVolume " & DiskNumbering)
			set TerminalNotifier to POSIX path of (path to me as text) & ("Contents/MacOS/terminal-notifier")
			set TerminalNotifier to quoted form of TerminalNotifier
			do shell script (TerminalNotifier & " -title 已刪除APFS磁鰈鰳唷💋")
		end tell
		continue quit
	on error errmsg number errnbr
		if errnbr = -128 then continue quit
		continue quit
	end try
end script
------------------------ 開啟腳本 ------------------------ON. 
script OpenScript
	try
		tell application "Finder"
			set OpenAppScript to POSIX path of (path to me as text) & ("Contents/Resources/Scripts/main.scpt")
			set OpenAppScript to quoted form of OpenAppScript
			do shell script ("open " & OpenAppScript)
			set TerminalNotifier to POSIX path of (path to me as text) & ("Contents/MacOS/terminal-notifier")
			set TerminalNotifier to quoted form of TerminalNotifier
			do shell script (TerminalNotifier & " -title 腳本已開啟鰳唷💋")
		end tell
		continue quit
	on error errmsg number errnbr
		if errnbr = -128 then continue quit
		continue quit
	end try
end script
----------------------------∞ 鱫鰰APFS助手 ∞----------------------------END. 


-- 
